<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BantuJeg WebApp</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./css/style.css">
    <!-- Google Maps script handled at bottom -->
</head>
<body class="bg-gray-50 text-gray-900 font-sans select-none overflow-hidden">

    <!-- OVERLAY: LOADING -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-70 z-[9999] hidden flex flex-col items-center justify-center backdrop-blur-sm">
        <div class="animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent shadow-lg mb-4"></div>
        <p class="text-white font-bold text-lg animate-pulse">Memproses...</p>
    </div>

    <!-- VIEW: LOGIN -->
    <div id="view-login" class="min-h-screen flex flex-col items-center justify-center p-6 bg-white">
        <div class="w-full max-w-sm text-center">
            <!-- Logo Placeholder -->
            <div class="mb-8">
                <h1 class="text-4xl font-extrabold text-[color:var(--gojek-green)] tracking-tight">BantuJeg</h1>
                <p class="text-gray-500 mt-2 text-sm">Aplikasi Ojek & Pengiriman Lokal</p>
            </div>

            <div class="mb-8 text-left">
                <label class="block text-gray-700 text-sm font-bold mb-2 ml-1">Nomor WhatsApp</label>
                <div class="relative">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-500 font-bold">+62</span>
                    <input type="tel" id="login-phone" placeholder="8123456789" class="input-field w-full pl-14 pr-4 py-4 rounded-xl text-lg font-medium text-gray-900 bg-gray-50">
                </div>
                <p class="text-xs text-gray-400 mt-3 ml-1">Kami akan mengirimkan link masuk ke WhatsApp Anda.</p>
            </div>

            <button onclick="requestLogin()" class="btn-primary w-full py-4 rounded-full text-lg shadow-lg">
                Masuk / Daftar
            </button> <!-- closing button tag was missing -->
        </div>
        
        <div class="mt-12 text-center text-xs text-gray-400">
            &copy; 2026 BantuJeg Inc.
        </div>
    </div>

    <!-- VIEW: MAIN -->
    <div id="view-main" class="hidden h-screen flex flex-col relative w-full max-w-md mx-auto bg-white shadow-2xl overflow-hidden">
        
        <!-- Map Container -->
        <div id="map" class="flex-grow z-0"></div>

        <!-- Action Panel -->
        <div class="bg-white rounded-t-3xl shadow-[0_-5px_20px_rgba(0,0,0,0.1)] p-5 -mt-6 z-10 relative">
            
            <!-- Dragger Handle (Visual Only) -->
            <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto mb-6"></div>

            <!-- Service Tabs -->
            <div class="flex justify-between space-x-3 overflow-x-auto pb-2 mb-4 no-scrollbar">
                <button onclick="setService('RIDE')" id="btn-RIDE" class="service-tab active flex-1 py-3 px-2 rounded-2xl text-sm font-bold whitespace-nowrap transition flex flex-col items-center justify-center gap-1">
                    <span>üõµ</span>
                    <span>JEG-RIDE</span>
                </button>
                <button onclick="setService('FOOD')" id="btn-FOOD" class="service-tab inactive flex-1 py-3 px-2 rounded-2xl text-sm font-bold whitespace-nowrap transition flex flex-col items-center justify-center gap-1">
                    <span>üçî</span>
                    <span>JEG-FOOD</span>
                </button>
                <button onclick="setService('SEND')" id="btn-SEND" class="service-tab inactive flex-1 py-3 px-2 rounded-2xl text-sm font-bold whitespace-nowrap transition flex flex-col items-center justify-center gap-1">
                    <span>üì¶</span>
                    <span>JEG-SEND</span>
                </button>
            </div>

            <!-- Inputs -->
            <div class="space-y-4">
                <!-- Pickup -->
                <div class="relative group">
                    <span class="absolute left-4 top-4 text-[10px] transform scale-150 dot-pickup">‚óè</span>
                    <input id="input-pickup" type="text" placeholder="Lokasi Jemput (Cari disini...)" class="input-field w-full pl-10 pr-4 py-3 rounded-xl text-sm bg-gray-50 group-hover:bg-white">
                </div>
                
                <!-- Dropoff -->
                <div class="relative group">
                    <span class="absolute left-4 top-4 text-[10px] transform scale-150 dot-dropoff">‚óè</span>
                    <input id="input-dropoff" type="text" placeholder="Tujuan Antar (Cari disini...)" class="input-field w-full pl-10 pr-4 py-3 rounded-xl text-sm bg-gray-50 group-hover:bg-white">
                </div>

                <!-- Note -->
                <div class="relative group">
                    <span class="absolute left-4 top-3.5 text-gray-400">üìù</span>
                    <input id="input-note" type="text" placeholder="Catatan untuk driver (Opsional)" class="input-field w-full pl-10 pr-4 py-3 rounded-xl text-sm bg-gray-50">
                </div>

                <!-- Payment & Submit -->
                <div class="flex space-x-3 pt-3">
                    <div class="w-1/3">
                        <select id="input-payment" class="input-field w-full h-full rounded-xl px-3 text-sm font-bold text-gray-700 bg-white">
                            <option value="CASH">üíµ Tunai</option>
                            <option value="QRIS">üí≥ QRIS</option>
                        </select>
                    </div>
                    <button onclick="submitOrder()" class="btn-primary w-2/3 py-3.5 rounded-xl shadow-lg flex items-center justify-center text-lg">
                        PESAN SEKARANG
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS LOADING ORDER IS CRITICAL -->
    <!-- 1. Auth Logic -->
    <script src="./js/auth.js"></script>
    <!-- 2. Map Logic -->
    <script src="./js/map.js"></script>
    <!-- 3. Main App Logic -->
    <script src="./js/app.js"></script>
    <!-- 4. Google Maps API (Async) -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDwbtq81niH-J_a8N_VS0gAEehuBUCrNWM&libraries=places,geometry&callback=initMap" async defer></script>

</body>
</html>
